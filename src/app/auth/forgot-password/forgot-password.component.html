<div class="forgot-container">
  <ion-grid class="forgot-grid">
    <ion-row>
      <ion-col sizeLg="6" sizeMd="8" sizeSm="12" class="forgot-col-wrapper">
        <ion-card class="forgot-card" [formGroup]="forgotPasswordForm">
          <!-- Header Section -->
          <div class="forgot-header">
            <div class="logo-container">
              <img class="forgot-logo" src="../../../assets/images/top3talent-logo1.png" alt="Logo">
            </div>
            <h1 class="forgot-title">Forgot Password?</h1>
            <p class="forgot-subtitle">Enter your email to receive a password reset link</p>
          </div>

          <ion-card-content class="forgot-form-content" *ngIf="!emailSent">
            <!-- Email Section -->
            <div class="form-section">
              <div class="form-field-wrapper">
                <ion-input 
                  formControlName="email" 
                  label="Email Address" 
                  label-placement="floating" 
                  fill="outline"
                  type="email"
                  placeholder="john.doe@example.com"
                  class="form-input"
                  [class.input-error]="forgotPasswordForm.controls['email']?.invalid && (forgotPasswordForm.controls['email']?.dirty || forgotPasswordForm.controls['email'].touched)">
                </ion-input>
                <div class="error-message"
                  *ngIf="forgotPasswordForm.controls['email']?.invalid && (forgotPasswordForm.controls['email']?.dirty || forgotPasswordForm.controls['email'].touched)">
                  <ion-icon name="alert-circle-outline"></ion-icon>
                  <span *ngIf="forgotPasswordForm.controls['email']?.errors?.required">Email is required</span>
                  <span *ngIf="forgotPasswordForm.controls['email']?.errors?.email">Please enter a valid email address</span>
                </div>
              </div>

              <!-- Error Message -->
              <div class="error-alert" *ngIf="errorMessage">
                <ion-icon name="alert-circle-outline"></ion-icon>
                <span>{{ errorMessage }}</span>
              </div>

              <!-- Info Message -->
              <div class="info-message">
                <ion-icon name="information-circle-outline"></ion-icon>
                <span>We'll send you an email with instructions to reset your password</span>
              </div>
            </div>
          </ion-card-content>

          <!-- Success Message -->
          <ion-card-content class="forgot-form-content" *ngIf="emailSent">
            <div class="success-section">
              <ion-icon name="checkmark-circle" class="success-icon"></ion-icon>
              <h2 class="success-title">Check Your Email</h2>
              <p class="success-message">{{ successMessage }}</p>
              <p class="success-info">Didn't receive the email? Check your spam folder or request a new reset link.</p>
            </div>
          </ion-card-content>

          <!-- Action Buttons -->
          <div class="forgot-actions">
            <ion-button 
              expand="block" 
              (click)="onSubmit()"
              class="forgot-button"
              [disabled]="forgotPasswordForm.invalid || loading"
              *ngIf="!emailSent">
              <ion-spinner *ngIf="loading" class="button-spinner"></ion-spinner>
              <span *ngIf="!loading">Send Reset Link</span>
            </ion-button>

            <ion-button 
              expand="block" 
              (click)="goBackToLogin()"
              class="back-button"
              *ngIf="emailSent">
              Back to Login
            </ion-button>
          </div>

          <!-- Back to Login Link -->
          <div class="back-link-section">
            <a [routerLink]="['/auth/login']" class="back-link" *ngIf="!emailSent">
              <ion-text color="primary">
                <ion-icon name="chevron-back-outline"></ion-icon>
                <span>Back to Login</span>
              </ion-text>
            </a>
          </div>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</div>
